class TestInput { assert data }
    is TestSuite

    direct method assert: assert
        self assert: assert data: False!

    method system: system
        data = system files / "data"!

    method data: fname asInput: block
        (data / fname) forRead open: { |f| block value: f asInput }!

    method test_atEof
        self data: "empty.txt"
             asInput: { |input|
                        -- EOF isn't detected until a failed read, for better or worse.
                        input readChar_onEof: { False }.
                        assert true: { input atEof } }!

    method test_lines
        self data: "lorem_ipsum.txt"
             asInput: { |input|
                        assert true: { 6 == input lines size } }!

    method test_input_readline
        self data: "lorem_ipsum.txt"
             asInput:  { |input|
                         assert true: { "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"
                                            == input readline } }!

    method test_input_readline_long_line
        self data: "1001-character-line.txt"
             asInput: { |input|
                        assert that: { input readline size }
                               equals: 1001 }!
end
