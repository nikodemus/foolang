import .list.List
import .exception.*
import .output

interface TestSuite
    method runTests
        self doTests: { |each| self runTest: each }.
        self!

    method runTest: test
        Output debug print: "- ".
        Output debug println: test name.
        Output debug flush.
        test sendTo: self with: []!

    method doTests: block
        let list = List new.
        self __doSelectors: { |selector|
                              (selector startsWith: "test")
                                  ifTrue: { list add: selector } }.
        list isEmpty
            ifTrue: { Error raise: "Not tests for {self}!" }.
        list sort do: block.
        self!
end
